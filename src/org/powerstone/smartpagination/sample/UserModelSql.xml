<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
    "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="UserSQL">
	<sql id="user_model_where">
		<dynamic>
			<isNotEmpty property="userName" prepend=" and ">
				<isEqual property="userNameLike" compareValue="true">lower(user_Name) like #userName#</isEqual>
				<isNotEqual property="userNameLike" compareValue="true">user_Name = #userName#</isNotEqual>
			</isNotEmpty>
			<isNotEmpty property="email" prepend=" and ">lower(email) like #email#</isNotEmpty>
			<isNotEmpty property="realName" prepend=" and ">lower(real_Name) like #realName#</isNotEmpty>
			<isNotEmpty property="sex" prepend=" and ">sex=#sex#</isNotEmpty>
		</dynamic>
	</sql>
	<select id="countUser"
		parameterClass="org.powerstone.smartpagination.sample.ibatis.UserModelIbatisQuery"
		resultClass="java.lang.Integer">
		select count(id) from user_model where 1=1 <include refid="user_model_where" />
	</select>
	<select id="findUsers"
		parameterClass="org.powerstone.smartpagination.sample.ibatis.UserModelIbatisQuery"
		resultClass="org.powerstone.smartpagination.sample.UserModel">
		select id,user_Name as userName,email,real_Name as realName,sex,birth
		from user_model where 1=1 <include refid="user_model_where" />
		<dynamic prepend=" order by ">
			<isNotEmpty property="orderByStr"> $orderByStr$ </isNotEmpty>
		</dynamic>
	</select>
</sqlMap>